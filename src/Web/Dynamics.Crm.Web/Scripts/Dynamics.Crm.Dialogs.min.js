var Dynamics;(function(n){var t;(function(n){var t;(function(n){"use strict";function t(){if(!i){var t=window.top;i=n.bootstrapEnabled?new n.BootstrapDialogProvider(t):new n.CrmDialogProvider(t)}return i}function r(n,i){var u=window.top,r=u.$.Deferred();return t().Alert(n,i).done(function(n){return n.Show().done(function(){return r.resolve()}).fail(function(){return r.reject()}).always(function(){return n.Destroy()})}).fail(function(){return r.reject()}),r}function u(n,i){var u=window.top,r=u.$.Deferred();return t().Confirm(n,i).done(function(n){return n.Show().done(function(){return r.resolve(!0)}).fail(function(){return r.reject()}).always(function(){return n.Destroy()})}).fail(function(){return r.reject()}),r}function f(n){var r=window.top,i=r.$.Deferred();return t().Create(n).done(function(t){return t.Show().done(function(){var t=n.Done();i.resolve(t)}).fail(function(){return i.reject()})}).fail(function(){return i.reject()}),i}function e(){t()}(function(n){n[n.Alert=0]="Alert";n[n.Confirm=1]="Confirm";n[n.Custom=2]="Custom"})(n.DialogType||(n.DialogType={}));var o=n.DialogType,i;n.alert=r;n.confirm=u;n.create=f;n.bootstrapEnabled=!0;n.init=e})(t=n.Dialogs||(n.Dialogs={}))})(t=n.Crm||(n.Crm={}))})(Dynamics||(Dynamics={})),function(n){var t;(function(t){var i;(function(i){"use strict";var u=function(){function n(){}return n.alert=function(n,t){return"\n            <div class='modal fade' tabindex='-1' role='dialog'>\n            <div class='modal-dialog' role='document'>\n               <div class='modal-content'>\n                   <div class='modal-header'>\n                       <button type='button' class='close' data-dismiss='modal' aria-label='Close'>\n                           <span aria-hidden='true' >&times;<\/span><\/button>\n                       <h4 class='modal-title'>"+t+"<\/h4>\n                   <\/div>\n                   <div class='modal-body'>"+n+"<\/div>\n                   <div class='modal-footer'>\n                       <button type='button' class='btn btn-primary' data-dismiss='modal'>OK<\/button>\n                   <\/div>\n               <\/div>\n            <\/div>\n            <\/div>"},n.confirm=function(n,t){return"\n            <div class='modal fade' tabindex='-1' role='dialog'>\n            <div class='modal-dialog' role='document'>\n               <div class='modal-content'>\n                   <div class='modal-header'>\n                       <button type='button' class='close' data-dismiss='modal' aria-label='Close'>\n                           <span aria-hidden='true' >&times;<\/span><\/button>\n                       <h4 class='modal-title'>"+t+"<\/h4>\n                   <\/div>\n                   <div class='modal-body'>"+n+"<\/div>\n                   <div class='modal-footer'>\n                       <button type='button' class='btn btn-primary' data-dismiss='modal'>OK<\/button>\n                       <button type='button' class='btn btn-default' data-dismiss='modal'>Close<\/button>\n                   <\/div>\n               <\/div>\n            <\/div>\n            <\/div>"},n}(),r=function(){function n(n,t,i){this._content=t;this._window=n;this._init=i}return n.prototype.Resolve=function(){this.deferred.resolve()},n.prototype.Reject=function(){this.deferred.reject()},n.prototype.Show=function(){return this.dialog.modal("show"),this.deferred},n.prototype.Destroy=function(){this._dialog&&this._dialog.remove()},Object.defineProperty(n.prototype,"dialog",{get:function(){return this._dialog||(this._dialog=this._window.$(this._content),this._dialog.appendTo(this._window.$("body")),this._dialog.modal({backdrop:!1,show:!1}),this._window.$("button.btn-primary",this._dialog).click(this.Resolve.bind(this)),this._window.$("button.close",this._dialog).click(this.Reject.bind(this)),this._window.$("button.btn-default",this._dialog).click(this.Reject.bind(this)),this._init&&this._init(this._dialog)),this._dialog},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"deferred",{get:function(){return this._deferred||(this._deferred=$.Deferred()),this._deferred},enumerable:!0,configurable:!0}),n}(),f;i.BootstrapDialog=r;f=function(){function i(n){this._window=n;this.Init()}return i.prototype.Init=function(){var i="../WebResources/"+n.Crm.Publishers.bootstrap+"_/Libs/bootstrap/";this._loading=t.ScriptManager.loadScript(i+"js/bootstrap.min.js",this._window);t.ScriptManager.loadStylesheet(i+"css/bootstrap.min.css",this._window)},i.prototype.Alert=function(n,t){var i=this;return this._loading.then(function(){return new r(i._window,u.alert(n,t))})},i.prototype.Confirm=function(n,t){var i=this;return this._loading.then(function(){return new r(i._window,u.confirm(n,t))})},i.prototype.Create=function(n){var t=this;return this._loading.then(function(){return new r(t._window,n.Template,n.Init)})},i}();i.BootstrapDialogProvider=f})(i=t.Dialogs||(t.Dialogs={}))})(t=n.Crm||(n.Crm={}))}(Dynamics||(Dynamics={})),function(n){var t;(function(n){var t;(function(n){"use strict";var i=function(){function n(n,t){this._window=n;this._message=t}return n.prototype.Show=function(){var n=this._window.$.Deferred();return Xrm.Utility.alertDialog(this._message,function(){n.resolve()}),n},n.prototype.Destroy=function(){},n}(),t,r;n.CrmAlertDialog=i;t=function(){function n(n,t){this._window=n;this._message=t}return n.prototype.Show=function(){var n=this._window.$.Deferred();return Xrm.Utility.confirmDialog(this._message,function(){n.resolve(!0)},function(){n.reject()}),n},n.prototype.Destroy=function(){},n}();n.CrmConfirmDialog=t;r=function(){function n(n){this._window=n}return n.prototype.Alert=function(n){var t=this._window.$.Deferred();return t.resolve(new i(this._window,n)),t},n.prototype.Confirm=function(n){var i=this._window.$.Deferred();return i.resolve(new t(this._window,n)),i},n.prototype.Create=function(){throw Error("Not supported.");},n}();n.CrmDialogProvider=r})(t=n.Dialogs||(n.Dialogs={}))})(t=n.Crm||(n.Crm={}))}(Dynamics||(Dynamics={}));