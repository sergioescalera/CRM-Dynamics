var Dynamics;(function(n){var t;(function(n){var t;(function(t){"use strict";function r(){if(!i)throw new Error("Dialog provider hasn't been initialized");return i}function f(n,t){var u=window.top,i=u.$.Deferred();return r().Alert(n,t).done(function(n){return n.Show().done(function(){return i.resolve()}).fail(function(){return i.reject()}).always(function(){return n.Destroy()})}).fail(function(){return i.reject()}),i}function e(n,t){var u=window.top,i=u.$.Deferred();return r().Confirm(n,t).done(function(n){return n.Show().done(function(){return i.resolve(!0)}).fail(function(){return i.reject()}).always(function(){return n.Destroy()})}).fail(function(){return i.reject()}),i}function o(n){var i=window.top,t=i.$.Deferred();return r().Create(n).done(function(i){return i.Show().done(function(){var i=n.Done();t.resolve(i)}).fail(function(){return t.reject()})}).fail(function(){return t.reject()}),t}function s(r){var u=window.top;r=r||n.Publishers.bootstrap;i=t.bootstrapEnabled?new t.BootstrapDialogProvider(u,r):new t.CrmDialogProvider(u)}var u,i;(function(n){n[n.Alert=0]="Alert";n[n.Confirm=1]="Confirm";n[n.Custom=2]="Custom"})(u=t.DialogType||(t.DialogType={}));t.alert=f;t.confirm=e;t.create=o;t.bootstrapEnabled=!0;t.init=s})(t=n.Dialogs||(n.Dialogs={}))})(t=n.Crm||(n.Crm={}))})(Dynamics||(Dynamics={})),function(n){var t;(function(n){var t;(function(t){"use strict";var r=function(){function n(){}return n.alert=function(n,t){return"\n            <div class='modal fade' tabindex='-1' role='dialog'>\n            <div class='modal-dialog' role='document'>\n               <div class='modal-content'>\n                   <div class='modal-header'>\n                       <button type='button' class='close' data-dismiss='modal' aria-label='Close'>\n                           <span aria-hidden='true' >&times;<\/span><\/button>\n                       <h4 class='modal-title'>"+t+"<\/h4>\n                   <\/div>\n                   <div class='modal-body'>"+n+"<\/div>\n                   <div class='modal-footer'>\n                       <button type='button' class='btn btn-primary' data-dismiss='modal'>OK<\/button>\n                   <\/div>\n               <\/div>\n            <\/div>\n            <\/div>"},n.confirm=function(n,t){return"\n            <div class='modal fade' tabindex='-1' role='dialog'>\n            <div class='modal-dialog' role='document'>\n               <div class='modal-content'>\n                   <div class='modal-header'>\n                       <button type='button' class='close' data-dismiss='modal' aria-label='Close'>\n                           <span aria-hidden='true' >&times;<\/span><\/button>\n                       <h4 class='modal-title'>"+t+"<\/h4>\n                   <\/div>\n                   <div class='modal-body'>"+n+"<\/div>\n                   <div class='modal-footer'>\n                       <button type='button' class='btn btn-primary' data-dismiss='modal'>OK<\/button>\n                       <button type='button' class='btn btn-default' data-dismiss='modal'>Close<\/button>\n                   <\/div>\n               <\/div>\n            <\/div>\n            <\/div>"},n}(),i=function(){function n(n,t,i){this._content=t;this._window=n;this._init=i}return n.prototype.Resolve=function(){this.deferred.resolve()},n.prototype.Reject=function(){this.deferred.reject()},n.prototype.Show=function(){return this.dialog.modal("show"),this.deferred},n.prototype.Destroy=function(){this._dialog&&this._dialog.remove()},Object.defineProperty(n.prototype,"dialog",{get:function(){return this._dialog||(this._dialog=this._window.$(this._content),this._dialog.appendTo(this._window.$("body")),this._dialog.modal({backdrop:!1,show:!1}),this._window.$("button.btn-primary",this._dialog).click(this.Resolve.bind(this)),this._window.$("button.close",this._dialog).click(this.Reject.bind(this)),this._window.$("button.btn-default",this._dialog).click(this.Reject.bind(this)),this._init&&this._init(this._dialog)),this._dialog},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"deferred",{get:function(){return this._deferred||(this._deferred=$.Deferred()),this._deferred},enumerable:!0,configurable:!0}),n}(),u;t.BootstrapDialog=i;u=function(){function t(n,t){this._window=n;this.Init(t)}return t.prototype.Init=function(t){var i="../WebResources/"+t+"_/Libs/bootstrap/";this._loading=n.ScriptManager.loadScript(i+"js/bootstrap.min.js",this._window);n.ScriptManager.loadStylesheet(i+"css/bootstrap.min.css",this._window)},t.prototype.Alert=function(n,t){var u=this;return this._loading.then(function(){return new i(u._window,r.alert(n,t))})},t.prototype.Confirm=function(n,t){var u=this;return this._loading.then(function(){return new i(u._window,r.confirm(n,t))})},t.prototype.Create=function(n){var t=this;return this._loading.then(function(){return new i(t._window,n.Template,n.Init)})},t}();t.BootstrapDialogProvider=u})(t=n.Dialogs||(n.Dialogs={}))})(t=n.Crm||(n.Crm={}))}(Dynamics||(Dynamics={})),function(n){var t;(function(n){var t;(function(n){"use strict";var i=function(){function n(n,t){this._window=n;this._message=t}return n.prototype.Show=function(){var n=this._window.$.Deferred();return Xrm.Navigation.openAlertDialog({text:this._message}).then(function(){return n.resolve()}),n},n.prototype.Destroy=function(){},n}(),t,r;n.CrmAlertDialog=i;t=function(){function n(n,t,i){this._window=n;this._message=t;this._title=i}return n.prototype.Show=function(){var n=this._window.$.Deferred();return Xrm.Navigation.openConfirmDialog({text:this._message,title:this._title}).then(function(){n.resolve(!0)},function(){n.reject()}),n},n.prototype.Destroy=function(){},n}();n.CrmConfirmDialog=t;r=function(){function n(n){this._window=n}return n.prototype.Alert=function(n){var t=this._window.$.Deferred();return t.resolve(new i(this._window,n)),t},n.prototype.Confirm=function(n,i){var r=this._window.$.Deferred();return r.resolve(new t(this._window,n,i)),r},n.prototype.Create=function(){throw Error("Not supported.");},n}();n.CrmDialogProvider=r})(t=n.Dialogs||(n.Dialogs={}))})(t=n.Crm||(n.Crm={}))}(Dynamics||(Dynamics={}));